---
title: escapeKey
---

`escapeKey` は [`quoteStr`](/ja/reference/utils/quote-str/) と似ていますが、オブジェクトのキーについて使用する関数です。便宜上、空の文字列に対しても引用符で囲います。

## インポート

```ts
import { escapeKey } from "@tai-kun/surrealdb/utils";
```

## 使い方

```ts
function escapeKey(key: string): string;
```

#### 引数

`key`
:   オブジェクトのキー。

#### 返値

エスケープされた文字列を返します。必要に応じて二重引用符で囲います:

- 与えられた文字列が空の場合
  - `""` を返します。
- 与えられた文字列が英数字とアンダースコアのみで構成される場合
  - そのまま返します。
- 与えられた文字列に英数字とアンダースコア以外が含まれている場合
  - 二重引用符で囲います。
- 与えられた文字列にバックスラッシュ (`\`) が含まれている場合
  - それをエスケープします。
- 与えられた文字列に二重引用符が含まれている場合
  - それをエスケープします。

#### 例

ここの例で使用する文字列の種類は次のとおりです:

| 種類 | 表示 | `.length` | バイト配列 |
| --- | --- | --- | --- |
| ASCII | a | 1 | `[ 0x61 ]` |
| サロゲートペア | 𩸽 | 2 | `[ 0xF0, 0xA9, 0xB8, 0xBD ]` |
| 異体字セレクター | 👍🏽 | 4 | `[ 0xF0, 0x9F, 0x91, 0x8D, 0xF0, 0x9F, 0x8F, 0xBD ]` |
| 結合文字 | パ | 2 | `[ 0xE3, 0x83, 0x8F, 0xE3, 0x82, 0x9A ]` |

次の例では、文字列が英数字とアンダースコアのみで構成されるため、そのままの文字列を得ます:

```ts
import { escapeKey } from "@tai-kun/surrealdb/utils";

console.log(escapeKey(`123`));
console.log(escapeKey(`foo_bar`));
```

出力:

```js
123
foo_bar
```

次の例では、文字列を二重引用符で囲い、必要であればエスケープします:

```ts
import { escapeKey } from "@tai-kun/surrealdb/utils";

console.log(escapeKey(``));
console.log(escapeKey(`foo-bar`));
console.log(escapeKey(`'\\"\\`));
console.log(escapeKey(`𩸽's "feed"`));
console.log(escapeKey(`'👍🏽"`));
console.log(escapeKey(`'パ"`));
```

出力:

```js
""
"foo-bar"
"'\\"\"
"𩸽's \"feed\""
"'👍🏽\""
"'パ\""
```
